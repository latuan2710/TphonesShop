<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Add Product</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
	<style>
		#div-show-img {
			height: 500px;
		}
	</style>
</head>

<body>
	<div class="container">
		<h1 class="mt-4">Add Product</h1>

		<form th:action="@{/submitProduct(id=${product.id})}" method="POST" enctype="multipart/form-data" th:object="${product}">
			<div class="row">
				<div class="col-md-6">
					<div class="form-group">
						<label for="name">Name:</label>
						<input th:value="${product.name}" type="text" class="form-control" id="name" name="name" required>
					</div>

					<div class="form-group">
						<label for="quantity">Quantity:</label>
						<input th:value="${product.quantity}" type="number" class="form-control" id="quantity" name="quantity" required>
					</div>

					<div class="form-group">
						<label for="cost">Cost:</label>
						<input th:value="${product.cost}" type="number" step="0.01" class="form-control" id="cost" name="cost" required>
					</div>

					<div class="form-group">
						<label for="description">Description:</label>
						<textarea th:text="${product.description}" class="form-control" id="description" name="description" rows="4" required></textarea>
					</div>

					<div class="form-group">
						<label for="brand">Brand:</label>
						<select class="form-control" id="brand" name="brand" th:value="${product.cost}" required>
							<option th:each="brand:${brands}" th:text="${brand.name}"
								th:value="${brand.name}">Brand 1</option>
						</select>
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-group">
						<label for="image">Image:</label>
						<input onchange="loadFile()" type="file" class="form-control-file" id="image" name="productImg"
							accept="image/*" required>
						<br>
						<div id="div-show-img">
							<img class="mw-100 d-none" id="show-img" alt="image" loading="lazy" />
						</div>

					</div>
				</div>
			</div>
			<button type="submit" class="btn btn-primary">Add Product</button>
		</form>
	</div>
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
	<script>
		var loadFile = function () {
			var output = document.getElementById('show-img');
			output.src = URL.createObjectURL(event.target.files[0]);
			output.onload = function () {
				URL.revokeObjectURL(output.src)
			}
			$("#show-img").removeClass("d-none");
		};
	</script>
</body>

</html>